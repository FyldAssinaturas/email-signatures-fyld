<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Assinaturas FYLD — Builder</title>
<style>
  html,body{margin:0;padding:0;background:#f6f6f6;color:#000;font-family:Mogno, Arial, Helvetica, sans-serif;}
  .wrap{max-width:1100px;margin:24px auto;padding:20px;}
  .card{background:#fff;border-radius:14px;box-shadow:0 6px 20px rgba(0,0,0,.06);padding:18px;}
  .grid{display:grid;grid-template-columns:360px 1fr;gap:18px}
  @media (max-width:900px){ .grid{grid-template-columns:1fr} }
  h1{font-size:20px;margin:0 0 12px}
  label{display:block;font-size:13px;margin:8px 0 4px;color:#333}
  input[type="text"],input[type="tel"]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:10px;font-size:15px;}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  button{cursor:pointer;border:0;border-radius:12px;padding:12px 16px;font-weight:600;background:#000;color:#fff}
  button.secondary{background:#111;opacity:.85}
  .sig-outer{background:#fff;padding:16px;border:1px dashed #ddd;border-radius:12px;overflow:auto}
  .tip{font-size:12px;color:#666;margin-top:8px}
</style>
</head>
<body>
<div class="wrap">
  <h1>Assinaturas FYLD — Builder</h1>

  <div class="grid card">
    <div>
      <label>Nome</label>
      <input id="nome" type="text" value="Filipa Freire" />
      <label>Cargo</label>
      <input id="cargo" type="text" value="Graphic Designer" />
      <label>TM (telemóvel, com indicativo)</label>
      <input id="tm" type="tel" value="(+351) 934 556 060" />
      <label>Imagem (ficheiro no repo ou URL)</label>
      <input id="foto" type="text" value="headshot-filipa-freire.png" />

      <div class="row" style="margin-top:14px">
        <button id="copyBtn">Copiar assinatura (HTML)</button>
        <button class="secondary" id="openBtn">Abrir só a assinatura</button>
      </div>
      <p class="tip">FYLD tight — sidebar junto ao conteúdo (gap ~6px)</p>
    </div>

    <div>
      <div class="sig-outer"><div id="signaturePreview"></div></div>
    </div>
  </div>
</div>

<script>
const ORG  = "FyldAssinaturas";
const REPO = "email-signatures-fyld";
const RAW  = `https://raw.githubusercontent.com/${ORG}/${REPO}/main/`;
const LINKS = {
  instagram: "https://www.instagram.com/mainfyld/",
  linkedin:  "https://www.linkedin.com/company/fyld/",
  website:   "https://www.fyld.pt/"
};
function esc(s){return (s||"").replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]))}
function resolveImgPath(v){ return !v ? "" : (/^https?:\/\//i.test(v) ? v.trim() : (RAW + v.trim())); }

function buildSignatureHTML({nome, cargo, tm, foto}){
  const logo = RAW + "fyld-logo.png";
  const iso  = RAW + "certificacao-iso.png";
  const iconWeb = RAW + "icon-website.png";
  const iconIn  = RAW + "icon-linkedin.png";
  const iconIg  = RAW + "icon-instagram.png";
  const head = resolveImgPath(foto);

  return `
  <!-- FYLD Email Signature (~60% scale, tight sidebar) -->
  <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="width:560px;max-width:100%;font-family:Mogno, Arial, Helvetica, sans-serif;color:#000;">
    <tr>
      <!-- PHOTO -->
      <td style="width:100px;vertical-align:top;padding:0 4px 0 0;">
        ${head ? `<img src="${head}" alt="${esc(nome)}" width="82" style="display:block;width:82px;height:auto;border-radius:999px;border:0;">` : ``}
      </td>

      <!-- RIGHT BLOCK: 2-column grid (main | sidebar) -->
      <td style="vertical-align:top;">
        <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="width:100%;">
          <!-- Row 1: Logo in main, ISO in sidebar so they are adjacent -->
          <tr>
            <!-- MAIN (logo) -->
            <td style="vertical-align:middle;padding:0;">
              <img src="${logo}" alt="FYLD" width="340" style="display:block;max-width:100%;height:auto;border:0;">
            </td>
            <!-- SIDEBAR (ISO) -->
            <td style="width:68px;vertical-align:middle;padding-left:6px;white-space:nowrap;">
              <img src="${iso}" alt="ISO/IEC 27001 Certified" width="64" style="display:inline-block;max-width:64px;height:auto;border:0;">
            </td>
          </tr>

          <!-- Row 2: Content + icons (sidebar sits immediately next to contacts) -->
          <tr>
            <!-- MAIN (name + contacts) -->
            <td style="vertical-align:top
